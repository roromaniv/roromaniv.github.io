<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <title>Article</title>
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/responsive.css" />
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/typecolor.css" />
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/components/gallery/gallery.css" />
    <script type="application/javascript" src="/components/gallery/gallery.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/zero-md@3?register"></script>
</head>

<body>
    <div class="row fw">
        <div class="column g1 light p6">
            <p class="js-toc" style="position: fixed;">TOC</p>
        </div>
        <div class="column g3 p6">
            <div class="fw p6">
                <zero-md src="markdown.md"></zero-md>
            </div>
        </div>
    </div>
    <script>
        document.querySelector('zero-md').addEventListener('zero-md-rendered', () => {
            console.log('Markdown has been fully rendered!');
            let mdbody = document.getElementsByTagName("zero-md")[0].shadowRoot.childNodes[1];
            let toc = "";

            Array.from(mdbody.children).forEach(element => {
                console.log(element);
                if (element.tagName == "h1") {
                    toc += "<a href='" + element.id + "'>" + element.innerText + "</a>";
                } else if (element.tagName == "h2") {
                    toc += "<a class='pl6' href='" + element.id + "'>" + element.innerText + "</a>";
                } else if (element.tagName == "h3") {
                    toc += "<a class='pl8' href='" + element.id + "'>" + element.innerText + "</a>";
                }
            });
            document.getElementsByClassName("js-toc")[0].innerHTML = toc;
        });
    </script>
</body>

</html>